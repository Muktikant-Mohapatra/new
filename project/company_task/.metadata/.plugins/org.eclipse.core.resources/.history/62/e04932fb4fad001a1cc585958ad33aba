package com.parking.main;

import java.util.Scanner;

import com.parking.domain.model.Car;
import com.parking.domain.model.ParkingLot;
import com.parking.service.CarParkingService;
import com.parking.service.ParkingService;

public class Parking {
	public static void main(String[] args) {
		Scanner scanner = new Scanner(System.in);
		/*
		 * System.out.println("Enter Parking lot Size(In Number):"); String size =
		 * scanner.nextLine();
		 * System.out.println("Enter entry gate side (first,last,middle):"); String
		 * entryGate = scanner.nextLine();
		 */
		ParkingLot parkingArea = new ParkingLot(10,"first");
		ParkingService service = new CarParkingService();
		System.out.println("Choose options (In numbers 1 or 2)");
		System.out.println("1 : Park");
		System.out.println("2 : Leave");
		System.out.println("What you want to do? :");
		String choice=scanner.nextLine();
		choiceCall( parkingArea, service, choice);
		
		service.emptySlot();
		scanner.close();

	}

	private static void choiceCall( ParkingLot parkingArea, ParkingService service, String choice) {
		Scanner scanner=new Scanner(System.in);
		switch (choice) {
		case "1":
			System.out.println(" how many cars(In Number):");
			int noOfCars = scanner.nextInt();
			Car[] car = new Car[noOfCars];
			for (int i = 0; i < car.length; i++) {
				System.out.print(i+1 + ": Car Registration Number:");
				String registrationNumber = scanner.nextLine();
				System.out.print(i+1 + ": Car Colour:");
				String colour = scanner.nextLine();
				car[i] = new Car(registrationNumber, colour);
			}
			for (int i = 0; i < car.length; i++) {
				service.park(car[i], parkingArea);
			}
			break;
		case "2":
			System.out.println(" Enter your receipt slot no(if multiple are there separate by (,)):");
			String slotNumbers = scanner.nextLine();
			String[] stringTokens=slotNumbers.split(",");
			int[] slotNumberArray=new int[stringTokens.length];
			for (int i = 0; i < stringTokens.length; i++) {
				slotNumberArray[i]=Integer.parseInt(stringTokens[i]);
			}
			service.unPark(slotNumberArray);
			break;

		default:
			System.out.println("Enter a valid option ...");
			choiceCall(parkingArea, service, choice);
			break;
		}
		scanner.close();
	}
}
